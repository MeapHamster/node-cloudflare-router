!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},s=t||{},i=e.split(a),u=s.decode||n,l=0;l<i.length;l++){var h=i[l],c=h.indexOf("=");if(!(c<0)){var p=h.substr(0,c).trim(),d=h.substr(++c,h.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),null==r[p]&&(r[p]=o(d,u))}}return r},t.serialize=function(e,t,r){var n=r||{},a=n.encode||s;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var o=a(t);if(o&&!i.test(o))throw new TypeError("argument val is invalid");var u=e+"="+o;if(null!=n.maxAge){var l=n.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(l)}if(n.domain){if(!i.test(n.domain))throw new TypeError("option domain is invalid");u+="; Domain="+n.domain}if(n.path){if(!i.test(n.path))throw new TypeError("option path is invalid");u+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(u+="; HttpOnly");n.secure&&(u+="; Secure");if(n.sameSite){switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u};var n=decodeURIComponent,s=encodeURIComponent,a=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,t){try{return t(e)}catch(t){return e}}},function(e,t,r){const n=r(2),s=new n,a=new n,i=new n,o=new n;s.get("/",(e,t)=>{t.text("Welcome!")}),a.get("/:user",(e,t)=>{t.text(`Welcome ${e.params.user} to the admin panel!`)}),i.get("/",(e,t)=>{t.text("API operational")}),o.get("/",(e,t)=>{t.text("API v1 is operational")}),s.use("/admin",a),s.use("/api",i),i.use("/v1",o),s.responseHandler=(e,t,r)=>e,s.errorHandler=(e,t,r)=>{console.log(e)},addEventListener("fetch",e=>e.respondWith((async()=>s.serve(e.request))()))},function(e,t,r){const n=r(3),s=r(5),a=r(9);class i{constructor(){this._main=null,this._initiated=!1,this.routes=[],this.errorHandler=null,this.responseHandler=null,this.basePath=null}use(e,t){t instanceof i?(t.basePath=this._path(e),t.init(this._main||this)):this.routes.push({rawPath:this._path(e),path:new n(this._path(e)),handler:t,middleware:!0,num:this.routes.length+1})}get(e,t){return this._addRoute(e,"get",t)}post(e,t){return this._addRoute(e,"post",t)}options(e,t){return this._addRoute(e,"options",t)}head(e,t){return this._addRoute(e,"head",t)}delete(e,t){return this._addRoute(e,"delete",t)}_addRoute(e,t,r,s){const a={rawPath:this._path(e),path:new n(this._path(e)),method:t.toLowerCase(),handler:r};s?a.middleware=!0:a.route=!0,this._initiated?this._main.routes.push(a):this.routes.push(a)}_path(e){return(e=`${this.basePath||"/"}${e.startsWith("/")?e.slice(1):e}`).endsWith("/")||(e+="/"),e}init(e){if(!0!==this._initiated)if(e!==this&&e&&this._main!==this){this._main=e||this._main||this,this._initiated=!0;for(let e=0;e<this.routes.length;e++){const t=this.routes[e];this._addRoute(t.rawPath,t.method,t.handler,t.middleware)}}else this._main=this}serve(e,t){if(this._initiated||this.init(this._main||this),this._main!==this)return;e=e&&new s(e,t);let r,n=new a(e),i=!0;const o=()=>{const t=this._main.routes.filter(e=>!0===e.middleware).sort((e,t)=>e-t),s=this._main.routes.filter(e=>void 0===e.middleware||null===e.middleware).filter(t=>t.method.toLowerCase()===e.method.toLowerCase());for(let r=0;r<t.length;r++){const s=t[r];if(s.path.match(e.path))try{if(i=s.handler(e,n),!i)break}catch(e){throw i=!1,new Error(`An error occurred while processing middlewares at middleware #${r}\n ${e}`)}}if(!i)throw new Error("Not all middlewares were successful.");let a=!1;for(let t=0;t<s.length;t++){const i=s[t],o=i.path.match(e.path);if(o)try{e.params=o,i.handler(e,n),r=[n,e],a=!0;break}catch(e){throw new Error(`An error occurred while processing the route handler. ${e}`)}}if(!a){if(this.noRouteHandler)return this.noRouteHandler(n,e);r=[n.code(404).status("Not found").text(`No path for: "${encodeURI(e.path)}"`),e]}return r};let u;try{const e=o();u=e?e[0]:new Error("Improper data response from route handler.")}catch(e){console.log("An error occurred while serving the request"),console.log(e)}const l=u&&u instanceof a&&u._format()||u;if(l instanceof Error){if(this.errorHandler)return this.errorHandler(l,n,e);throw new Error(l)}return this.responseHandler?this.responseHandler(...l,e):[...l,e]}}e.exports=i},function(e,t,r){var n,s,a,i,o,u=[].slice;i=this,o=function(){var e,t,r,n,s,a,i,o,l,h,c,p,d,f,g;return l=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},i=function(e,t){var r,n,s;for(s=[],r=-1,n=e.length;++r<n;)s=s.concat(t(e[r]));return s},f=function(e,t){var r,n,s;for(s="",r=-1,n=e.length;++r<n;)s+=t(e[r]);return s},d=function(e){return new RegExp(e.toString()+"|").exec("").length-1},c=function(e,t){var r,n,s,a,i;for(a={},r=-1,s=e.length;++r<s;)n=e[r],null!=(i=t[r])&&(null!=a[n]?(Array.isArray(a[n])||(a[n]=[a[n]]),a[n].push(i)):a[n]=i);return a},(e={}).Result=function(e,t){this.value=e,this.rest=t},e.Tagged=function(e,t){this.tag=e,this.value=t},e.tag=function(t,r){return function(n){var s,a;if(null!=(s=r(n)))return a=new e.Tagged(t,s.value),new e.Result(a,s.rest)}},e.regex=function(t){return function(r){var n,s;if(null!=(n=t.exec(r)))return s=n[0],new e.Result(s,r.slice(s.length))}},e.sequence=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],function(r){var n,s,a,i,o;for(n=-1,s=t.length,o=[],a=r;++n<s;){if(null==(i=(0,t[n])(a)))return;o.push(i.value),a=i.rest}return new e.Result(o,a)}},e.pick=function(){var t,r;return t=arguments[0],r=2<=arguments.length?u.call(arguments,1):[],function(n){var s,a;if(null!=(a=e.sequence.apply(e,r)(n)))return s=a.value,a.value=s[t],a}},e.string=function(t){var r;return r=t.length,function(n){if(n.slice(0,r)===t)return new e.Result(t,n.slice(r))}},e.lazy=function(e){var t;return t=null,function(r){return null==t&&(t=e()),t(r)}},e.baseMany=function(t,r,n,s,a){var i,o,u;for(o=a,u=n?"":[];(null==r||null==r(o))&&null!=(i=t(o));)n?u+=i.value:u.push(i.value),o=i.rest;if(!s||0!==u.length)return new e.Result(u,o)},e.many1=function(t){return function(r){return e.baseMany(t,null,!1,!0,r)}},e.concatMany1Till=function(t,r){return function(n){return e.baseMany(t,r,!0,!0,n)}},e.firstChoice=function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],function(t){var r,n,s;for(r=-1,n=e.length;++r<n;)if(null!=(s=(0,e[r])(t)))return s}},p=function(t){var r;return(r={}).wildcard=e.tag("wildcard",e.string(t.wildcardChar)),r.optional=e.tag("optional",e.pick(1,e.string(t.optionalSegmentStartChar),e.lazy((function(){return r.pattern})),e.string(t.optionalSegmentEndChar))),r.name=e.regex(new RegExp("^["+t.segmentNameCharset+"]+")),r.named=e.tag("named",e.pick(1,e.string(t.segmentNameStartChar),e.lazy((function(){return r.name})))),r.escapedChar=e.pick(1,e.string(t.escapeChar),e.regex(/^./)),r.static=e.tag("static",e.concatMany1Till(e.firstChoice(e.lazy((function(){return r.escapedChar})),e.regex(/^./)),e.firstChoice(e.string(t.segmentNameStartChar),e.string(t.optionalSegmentStartChar),e.string(t.optionalSegmentEndChar),r.wildcard))),r.token=e.lazy((function(){return e.firstChoice(r.wildcard,r.optional,r.named,r.static)})),r.pattern=e.many1(e.lazy((function(){return r.token}))),r},o={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},a=function(e,t){if(Array.isArray(e))return f(e,(function(e){return a(e,t)}));switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return l(e.value);case"optional":return"(?:"+a(e.value,t)+")?"}},s=function(e,t){return null==t&&(t=o.segmentValueCharset),"^"+a(e,t)+"$"},n=function(e){if(Array.isArray(e))return i(e,n);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return n(e.value)}},h=function(e,t,r,n){var s,a,i;if(null==n&&(n=!1),null!=(i=e[t])){if(!((s=r[t]||0)>(Array.isArray(i)?i.length-1:0)))return a=Array.isArray(i)?i[s]:i,n&&(r[t]=s+1),a;if(n)throw new Error("too few values provided for key `"+t+"`")}else if(n)throw new Error("no values provided for key `"+t+"`")},r=function(e,t,n){var s,a;if(Array.isArray(e)){for(s=-1,a=e.length;++s<a;)if(r(e[s],t,n))return!0;return!1}switch(e.tag){case"wildcard":return null!=h(t,"_",n,!1);case"named":return null!=h(t,e.value,n,!1);case"static":return!1;case"optional":return r(e.value,t,n)}},g=function(e,t,n){if(Array.isArray(e))return f(e,(function(e){return g(e,t,n)}));switch(e.tag){case"wildcard":return h(t,"_",n,!0);case"named":return h(t,e.value,n,!0);case"static":return e.value;case"optional":return r(e.value,t,n)?g(e.value,t,n):""}},(t=function(e,r){var a,i,u;if(e instanceof t)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=r){if(!Array.isArray(r))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(a=d(this.regex),r.length!==a)throw new Error("regex contains "+a+" groups but array of group names contains "+r.length);this.names=r}}else{if(""===e)throw new Error("argument must not be the empty string");if(e.replace(/\s+/g,"")!==e)throw new Error("argument must not contain whitespace");if(i={escapeChar:(null!=r?r.escapeChar:void 0)||o.escapeChar,segmentNameStartChar:(null!=r?r.segmentNameStartChar:void 0)||o.segmentNameStartChar,segmentNameCharset:(null!=r?r.segmentNameCharset:void 0)||o.segmentNameCharset,segmentValueCharset:(null!=r?r.segmentValueCharset:void 0)||o.segmentValueCharset,optionalSegmentStartChar:(null!=r?r.optionalSegmentStartChar:void 0)||o.optionalSegmentStartChar,optionalSegmentEndChar:(null!=r?r.optionalSegmentEndChar:void 0)||o.optionalSegmentEndChar,wildcardChar:(null!=r?r.wildcardChar:void 0)||o.wildcardChar},null==(u=p(i).pattern(e)))throw new Error("couldn't parse pattern");if(""!==u.rest)throw new Error("could only partially parse pattern");this.ast=u.value,this.regex=new RegExp(s(this.ast,i.segmentValueCharset)),this.names=n(this.ast)}}).prototype.match=function(e){var t,r;return null==(r=this.regex.exec(e))?null:(t=r.slice(1),this.names?c(this.names,t):t)},t.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return g(this.ast,e,{})},t.escapeForRegex=l,t.concatMap=i,t.stringConcatMap=f,t.regexGroupCount=d,t.keysAndValuesToObject=c,t.P=e,t.newParser=p,t.defaultOptions=o,t.astNodeToRegexString=s,t.astNodeToNames=n,t.getParam=h,t.astNodeContainsSegmentsForProvidedParams=r,t.stringify=g,t},null!=r(4)?(s=[],void 0===(a="function"==typeof(n=o)?n.apply(t,s):n)||(e.exports=a)):null!==t?e.exports=o():i.UrlPattern=o()},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,r){const n=r(6),s=r(0);e.exports=class{constructor(e,t){this.url=this._fixUrl(e.url),this._request=e,this._url=new URL(this.url),this.path=this._url.pathname,this.query=n.parse(this._url.search.slice(1)),this.method=(e.method||"get").toLowerCase(),this.body=e.bodyUsed&&e.body||{},this.headers={},this.cookies={},this._fetchValues(e)}_fetchValues(e){[...e.headers].forEach(e=>{const[t,r]=e;this.headers[t.toLowerCase()]=r}),this.cookies=s.parse(this.headers.cookie||"")}_fixUrl(e){const t=e.indexOf("?")>-1?e.indexOf("?"):e.length;return"/"!==e.charAt(t-1)?[e.slice(0,t),"/",e.slice(t)].join(""):e}}},function(e,t,r){"use strict";t.decode=t.parse=r(7),t.encode=t.stringify=r(8)},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var h=0;h<l;++h){var c,p,d,f,g=e[h].replace(o,"%20"),m=g.indexOf(r);m>=0?(c=g.substr(0,m),p=g.substr(m+1)):(c=g,p=""),d=decodeURIComponent(c),f=decodeURIComponent(p),n(i,d)?s(i[d])?i[d].push(f):i[d]=[i[d],f]:i[d]=f}return i};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?a(i(e),(function(i){var o=encodeURIComponent(n(i))+r;return s(e[i])?a(e[i],(function(e){return o+encodeURIComponent(n(e))})).join(t):o+encodeURIComponent(n(e[i]))})).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){const n=r(0);e.exports=class{constructor(e){this.request=e,this.finalized=!1,this.response={code:200,status:"OK",headers:{},cookies:{},tasks:[],responseType:"text",body:null}}json(e){return this.response.body=JSON.stringify(e),this.response.responseType="application/json",this}raw(e,t){return this.response.body=e,this.response.responseType=t,this}status(e){return this.response.status=e,this}text(e){return this.response.body=e,this.response.type="text/plain",this}code(e){return this.response.code=e,this}tasks(e){return this.response.tasks=e,this}setHeader(e,t){return this.response.headers[e]=t,this}setCookie(e,t,r={}){return this.response.cookies[e]={value:t,options:r},this}end(e={}){const{code:t,status:r,tasks:n,body:s,type:a}=e;return t&&(this.response.code=t),r&&(this.response.status=r),n&&(this.response.tasks=n),s&&(this.response.body=s),a&&(this.response.responseType=a),this.finalized=!0,this}_format(){const e={statusText:this.response.status||"OK",status:this.response.code||200,headers:this.response.headers||{}},t=this.response.body,r=this.response.cookies;if(r){let t="";Object.keys(r).every(e=>{const{value:s,options:a}=r[e];let i=n.serialize(e,s,a);t+=`${i};`}),e.headers["Set-Cookie"]=t}return this.response.responseType&&(e.headers["Content-Type"]=this.response.responseType),this.response.tasks&&(this.response.tasks=Array.isArray(this.response.tasks)?this.response.tasks:[this.response.tasks]),[new Response(t,e),this.response.tasks||[]]}}}]);